@model KYC_EDDPortal.Models.AccountRequest

@{
    ViewData["Title"] = "Initiation";
    //Layout = "~/Views/Shared/_Layout.cshtml";
    Layout = "~/Views/Shared/Layout2.cshtml";

}

<h2>Initiation</h2>


@using (Html.BeginForm("Initiation", "Home", FormMethod.Post))
{
    @Html.ValidationSummary(true)
<div class="row">
    <div class="col-md-6">
        <div class="row">
            <div class="col-sm-6 col-sm-text-right">
                @Html.LabelFor(model => model.RequestType)
            </div>
            <div @*class="col-sm-3" *@>
                <select class="form-control" id="RequestType" name="RequestType">
                    <option value="">   Select Request Type ...</option>
                    <option value="KYC">KYC</option>
                    <option value="EDD">EDD</option>

                </select>
            </div>
        </div>
        <div class="form-group">

            <label asp-for="AccountNumber" class="control-label"></label>

            <input id="AccountNumber" asp-for="AccountNumber" class="form-control"
                   onblur="fetchAccountDetails()"
                   required
                   type="number"
                   pattern="\d{10}" maxlength="10"
                   title="Account number must be 10 digits" />

            <span asp-validation-for="AccountNumber" class="text-danger"></span>

        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.AccountName)
            @Html.TextBoxFor(model => model.AccountName, new { @class = "form-control" })
            @Html.ValidationMessageFor(model => model.AccountName)
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.CustomerID)
            @Html.TextBoxFor(model => model.CustomerID, new { @class = "form-control" })
            @Html.ValidationMessageFor(model => model.CustomerID)
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.CustomerName)
            @Html.TextBoxFor(model => model.CustomerName, new { @class = "form-control" })
            @Html.ValidationMessageFor(model => model.CustomerName)
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.AccountType)
            @Html.TextBoxFor(model => model.AccountType, new { @class = "form-control" })
            @Html.ValidationMessageFor(model => model.AccountType)
        </div>
    </div>
    <div class="col-md-6">

        <div class="form-group">
            @Html.LabelFor(model => model.AccountProduct)
            @Html.TextBoxFor(model => model.AccountProduct, new { @class = "form-control" })
            @Html.ValidationMessageFor(model => model.AccountProduct)
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.Address)
            @Html.TextBoxFor(model => model.Address, new { @class = "form-control" })
            @Html.ValidationMessageFor(model => model.Address)
        </div>
        <div class="row">
            <div class="col-sm-3 col-sm-text-right">
                @Html.LabelFor(model => model.SanctionList)
            </div>
            <div class="col-sm-3">
                @Html.CheckBoxFor(model => model.SanctionList)
            </div>
        </div>

        <div class="row">
            <div class="col-sm-3 col-sm-text-right">
                @Html.LabelFor(model => model.PEPList)
            </div>
            <div class="col-sm-3">
                @Html.CheckBoxFor(model => model.PEPList)
            </div>
        </div>

        <div class="row">
            <div class="col-sm-3 col-sm-text-right">
                @Html.LabelFor(model => model.BlackList)
            </div>
            <div class="col-sm-3">
                @Html.CheckBoxFor(model => model.BlackList)
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.BranchCode)
            @Html.TextBoxFor(model => model.BranchCode, new { @class = "form-control" })
            @Html.ValidationMessageFor(model => model.BranchCode)
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.DateOfAddress)
            @Html.TextBoxFor(model => model.DateOfAddress, new { @class = "form-control", type = "date", @Value = Model.DateOfAddress.ToString("yyyy-MM-dd") })
            @Html.ValidationMessageFor(model => model.DateOfAddress)
        </div>


        

    </div>
    <div class="col-md-12">
        <p>&nbsp;</p>
        <div class="row">
            <div class="col-sm-6 col-sm-text-right">
                @Html.LabelFor(model => model.CustomerType)
            </div>
            <div class="col-sm-6">
                <select class="form-control">
                    <option value="">kindly Select ...</option>
                    <option value="Individual">Individual</option>
                    <option value="Corporate">Corporate</option>


                </select>
            </div>
        </div>
        <p> <h4>Corporate Account Details</h4></p>

        <table class="table">
            <tbody>
                <tr>
                    <td>
                        <div class="form-group">
                            @Html.LabelFor(model => model.RCNo)
                        </div>
                    </td>
                    <td>
                        <div class="form-group">
                            @Html.TextBoxFor(model => model.RCNo, new { @class = "form-control" })
                            @Html.ValidationMessageFor(model => model.RCNo)
                        </div>
                    </td>

                    <td>
                        <div class="form-group">
                            @Html.LabelFor(model => model.NatureOfBusiness)
                        </div>
                    </td>
                    <td>
                        <div class="form-group">
                            @Html.TextBoxFor(model => model.NatureOfBusiness, new { @class = "form-control" })
                            @Html.ValidationMessageFor(model => model.NatureOfBusiness)
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <p> <h4>Individual Account Details</h4></p>
        <table class="table">
            <tbody>
                <tr>
                    <td>
                        <div class="form-group">
                            @Html.LabelFor(model => model.Occupation)
                        </div>
                    </td>
                    <td>
                        <div class="form-group">
                            @Html.TextBoxFor(model => model.Occupation, new { @class = "form-control" })
                            @Html.ValidationMessageFor(model => model.Occupation)
                        </div>
                    </td>

                    <td>
                        <div class="form-group">
                            @Html.LabelFor(model => model.Employer)
                        </div>
                    </td>
                    <td>
                        <div class="form-group">
                            @Html.TextBoxFor(model => model.Employer, new { @class = "form-control" })
                            @Html.ValidationMessageFor(model => model.Employer)
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="form-group">
                            @Html.LabelFor(model => model.Nationality)
                        </div>
                    </td>
                    <td>
                        <div class="form-group">
                            @Html.TextBoxFor(model => model.Nationality, new { @class = "form-control" })
                            @Html.ValidationMessageFor(model => model.Nationality)
                        </div>
                    </td>

                    <td>
                        <div class="form-group">
                            @Html.LabelFor(model => model.IdentificationType)
                        </div>
                    </td>
                    <td>
                        <div class="form-group">
                            @Html.TextBoxFor(model => model.IdentificationType, new { @class = "form-control" })
                            @Html.ValidationMessageFor(model => model.IdentificationType)
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="form-group">
                            @Html.LabelFor(model => model.IdentificationNumber)
                        </div>
                    </td>
                    <td>
                        <div class="form-group">
                            @Html.TextBoxFor(model => model.IdentificationNumber, new { @class = "form-control" })
                            @Html.ValidationMessageFor(model => model.IdentificationNumber)
                        </div>
                    </td>

                    <td>
                        <div class="form-group">
                            @Html.LabelFor(model => model.IdentificationExpiryDate)
                        </div>
                    </td>
                    <td>
                        <div class="form-group">
                            @Html.TextBoxFor(model => model.IdentificationExpiryDate, new { @class = "form-control" })
                            @Html.ValidationMessageFor(model => model.IdentificationExpiryDate)
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="form-group">
                            @Html.LabelFor(model => model.DateOfBirth)
                        </div>
                    </td>
                    <td>
                        <div class="form-group">
                            @Html.TextBoxFor(model => model.DateOfBirth, new { @class = "form-control" })
                            @Html.ValidationMessageFor(model => model.DateOfBirth)
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="col-md-6">
        <p>&nbsp;</p>
        <div class="row">
            <div class="col-sm-6 col-sm-text-right">
                @Html.LabelFor(model => model.PurposeOfAccount)
            </div>
            <div class="col-sm-6">
                <select class="form-control" id="PurposeOfAccount" name="PurposeOfAccount">
                    <option value="">kindly Select ...</option>
                    <option value="Savings">Savings</option>
                    <option value="Loan">Loan</option>
                    <option value="Investment">Investment</option>
                    <option value="Loan Repayment">Loan Repayment</option>
                    <option value="Payroll">Payroll</option>

                </select>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-6 col-sm-text-right">
                @Html.LabelFor(model => model.Sourceoffunds)
            </div>
            <div class="col-sm-6">
                <select class="form-control" id="Sourceoffunds" name="Sourceoffunds">
                    <option value="">kindly Select ...</option>
                    <option value="Own Business">Own Business</option>
                    <option value="Salary">Salary</option>
                    <option value=" InheritanceORGift"> InheritanceORGift</option>
                    <option value="Commission">Commission</option>
                    <option value="Others">Others</option>

                </select>
            </div>
        </div>
        <div class="row" id="othersInputRow" style="display: none;">
            <div class="col-sm-6 col-sm-text-right">
                <label for="Others">Others:</label>
            </div>
            <div class="col-sm-6">
                <input type="text" class="form-control" id="Others" name="Others" />
            </div>
        </div>
        <div class="row">
            <div class="col-sm-6 col-sm-text-right">
                @Html.LabelFor(model => model.AddressVerified)
            </div>
            <div class="col-sm-6">
                <select class="form-control" id="AddressVerified" name="AddressVerified">
                    <option value="">kindly Select ...</option>
                    <option value="YES">YES</option>
                    <option value="NO">NO</option>


                </select>
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.AnticipatedVolume)
            @Html.TextBoxFor(model => model.AnticipatedVolume, new { @class = "form-control" })
            @Html.ValidationMessageFor(model => model.AnticipatedVolume)
        </div>

    </div>

    <div class="col-md-6">
        <div class="form-group">
            @Html.LabelFor(model => model.Typeofactivity)
            @Html.TextAreaFor(model => model.Typeofactivity, new { @class = "form-control", rows = 4 })
            @Html.ValidationMessageFor(model => model.Typeofactivity)
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.Comment)
            @Html.TextBoxFor(model => model.Comment, new { @class = "form-control" })
            @Html.ValidationMessageFor(model => model.Comment)
        </div>

    </div>


</div>

    <input type="submit" value="Submit" class="btn btn-primary" />
    }
    <script>
function fetchAccountDetails()
    {
    console.log("fetchAccountDetails called");

    var accountNumber = $('#AccountNumber').val();
      console.log("accountNumber: " + accountNumber);
    $.ajax({
        url: '@Url.Action("FetchAccountDetails", "Home")',
        type: 'POST',
        data: { accountNumber: accountNumber },
        success: function (response) {
            console.log("AJAX success");
            $('#AccountName').val(response.accountName || '');
            $('#CustomerName').val(response.customerName || '');
            $('#CustomerID').val(response.customerID || '');
            $('#CustomerEmail').val(response.customerEmail || '');
            $('#BranchCode').val(response.branchCode || '');
            $('#RcNo').val(response.rCNo || '');
            $('#DateOfBirth').val(response.dateOfBirth || '');
            $('#IdentificationExpiryDate').val(response.identificationExpiryDate || '');
            $('#Employer').val(response.employer || '');
            $('#IdentificationNumber').val(response.identificationNumber || '');
            $('#IdentificationType').val(response.identificationType || '');
            $('#Nationality').val(response.nationality || '');
            $('#Occupation').val(response.occupation || '');

        }
    });

  }

    const input = document.getElementById('AccountNumber');

    input.addEventListener('input', () => {
        if (input.value.length > 10) {
            input.setCustomValidity('Number must be 10 digits or less');
        }
    });

    $(document).ready(function () {
        $("#Sourceoffunds").change(function () {
            var selectedValue = $(this).val();
            if (selectedValue === "Others") {
                $("#othersInputRow").show();
            } else {
                $("#othersInputRow").hide();
            }
        });
    });
    </script>
